(function(b,u,e,C,s,H,E,W,l,p){"use strict";var f={Failed:l.getAssetIDByName("Small"),Delete:l.getAssetIDByName("ic_message_delete"),Copy:l.getAssetIDByName("toast_copy_link"),Open:l.getAssetIDByName("ic_leave_stage"),Clipboard:l.getAssetIDByName("pending-alert"),Clock:l.getAssetIDByName("clock"),Pronoun:l.getAssetIDByName("ic_accessibility_24px"),Settings:{Toasts:{Settings:l.getAssetIDByName("ic_selection_checked_24px"),Failed:l.getAssetIDByName("ic_close_circle_24px")},Initial:l.getAssetIDByName("coffee"),Update:l.getAssetIDByName("discover"),Locale:l.getAssetIDByName("ic_locale_24px"),External:l.getAssetIDByName("ic_raised_hand_list"),Edit:l.getAssetIDByName("ic_edit_24px")}},R={shadow:(t=.1)=>({shadowColor:"#000",shadowOffset:{width:1,height:4},shadowOpacity:t,shadowRadius:4.65,elevation:8}),displayToast:(t,r)=>{e.toasts.open({content:r=="clipboard"?`Copied ${t} to clipboard.`:t,source:r=="clipboard"?f.Clipboard:f.Settings.Initial})}},N=(t,r,a,n,i)=>{try{return t(...r)}catch(d){console.warn(`[${a}] The following error happened when trying to ${n} ${i??"unspecificied label"}: ${d}`);return}};const v=(t,r,a,n)=>N(()=>{if(t){t.length++,a++;for(let i=t.length-1;i>=a;i--)t[i]=t[i-1];return t[a-1]=r,t.length}},[t,r,a],s.manifest.name,"insert an item at",n);var z={mapItem:(t,r,a)=>N(()=>{let n=[];for(let i=0;i<t.length;i++)v(n,r(t[i],i,t),n.length);return n},[t,r],s.manifest.name,"map an array at",a),insertItem:v},w={plugin:{source:"https://github.com/acquitelol/vd-pronoun-db",pronoundb:"https://pronoundb.org/"},author:{profile:{"Rosie<3":"https://github.com/acquitelol"}}};const{TouchableOpacity:x,View:S,Image:j,Text:A,Animated:D}=E.General,B=u.findByProps("transitionToGuild","openURL"),O=u.findByStoreName("UserStore"),q=u.findByProps("showUserProfile"),g=e.stylesheet.createThemedStyleSheet({container:{marginTop:25,marginLeft:"5%",marginBottom:-15,flexDirection:"row"},textContainer:{paddingLeft:15,paddingTop:5,flexDirection:"column",flexWrap:"wrap",...R.shadow()},image:{width:75,height:75,borderRadius:10,...R.shadow()},mainText:{opacity:.975,letterSpacing:.25},header:{color:p.semanticColors.HEADER_PRIMARY,fontFamily:e.constants.Fonts.DISPLAY_BOLD,fontSize:25,letterSpacing:.25},subHeader:{color:p.semanticColors.HEADER_SECONDARY,fontSize:12.75}});var J=({name:t,authors:r})=>{const a=e.React.useRef(new D.Value(1)).current,n=()=>D.spring(a,{toValue:1.1,duration:10,useNativeDriver:!0}).start(),i=()=>D.spring(a,{toValue:1,duration:250,useNativeDriver:!0}).start(),d=()=>q.showUserProfile({userId:O.getCurrentUser().id}),m={transform:[{scale:a}]};return e.React.createElement(e.React.Fragment,null,e.React.createElement(S,{style:g.container},e.React.createElement(x,{onPress:d,onPressIn:n,onPressOut:i},e.React.createElement(D.View,{style:m},e.React.createElement(j,{style:[g.image],source:{uri:O?.getCurrentUser()?.getAvatarURL()?.replace("webp","png")}}))),e.React.createElement(S,{style:g.textContainer},e.React.createElement(x,{onPress:()=>B.openURL(w.plugin.source)},e.React.createElement(A,{style:[g.mainText,g.header]},t)),e.React.createElement(S,{style:{flexDirection:"row"}},e.React.createElement(A,{style:[g.mainText,g.subHeader]},"A project by"),z.mapItem(r,(h,y,I)=>e.React.createElement(x,{onPress:()=>B.openURL(w.author.profile[h.name]??"https://github.com/")},e.React.createElement(A,{style:[g.mainText,g.subHeader,{paddingLeft:4,fontFamily:e.constants.Fonts.DISPLAY_BOLD,flexDirection:"row"}]},h.name,y<I.length-1?",":null)))))))};const{View:K,Text:X}=E.General,$=e.stylesheet.createThemedStyleSheet({text:{color:p.semanticColors.HEADER_SECONDARY,paddingLeft:"5.5%",paddingRight:10,marginBottom:10,letterSpacing:.25,fontFamily:e.constants.Fonts.PRIMARY_BOLD,fontSize:12}});var P=({label:t,children:r})=>e.React.createElement(K,{style:{marginTop:10}},e.React.createElement(X,{style:[$.text,$.optionText]},t.toUpperCase()),r);const{Image:L}=E.General,Q=e.ReactNative.Dimensions?.get("window").width;var U=({style:t,source:r})=>{const[a,n]=e.React.useState({width:0,height:0}),[i,d]=e.React.useState(0),m=()=>{const h=_=>typeof _=="string"?parseInt(_.replace("%",""))*Q/100:_,y=h(t.width);if(!t.maxWidth)return y;const I=h(t.maxWidth);return y>I?I:y};return e.React.useEffect(()=>{L.getSize(r,(h,y)=>{n({width:h,height:y})},h=>{console.error(`[${s.manifest.name}] ${h} when fetching ${r}`)}),d(m())},[]),e.React.createElement(L,{style:[...Array.isArray(t)?t:[t],{height:i*(a.height/a.width)}],source:{uri:r},resizeMode:"stretch"})};const{FormRow:c,FormSwitch:F,FormDivider:M}=E.Forms,{ScrollView:Z,View:T,Text:ee}=E.General,Y=u.findByProps("transitionToGuild","openURL"),o=e.stylesheet.createThemedStyleSheet({icon:{color:p.semanticColors.INTERACTIVE_NORMAL},item:{color:p.semanticColors.TEXT_MUTED,fontFamily:e.constants.Fonts.PRIMARY_MEDIUM},container:{width:"90%",marginLeft:"5%",borderRadius:10,backgroundColor:p.semanticColors.BACKGROUND_MOBILE_SECONDARY,...R.shadow()},subheaderText:{color:p.semanticColors.HEADER_SECONDARY,textAlign:"center",margin:10,marginBottom:50,letterSpacing:.25,fontFamily:e.constants.Fonts.PRIMARY_BOLD,fontSize:14},image:{width:"100%",maxWidth:350,borderRadius:10}});var te=()=>{W.useProxy(s.storage);const[t,r]=e.React.useState(s.storage.isTimestamp),[a,n]=e.React.useState(s.storage.isRole);return e.React.createElement(Z,null,e.React.createElement(J,{name:s.manifest.name,authors:s.manifest.authors}),e.React.createElement(T,{style:{marginTop:20}},e.React.createElement(P,{label:"Preferences"},e.React.createElement(T,{style:[o.container]},e.React.createElement(c,{label:"Timestamps",subLabel:"Use Timestamps instead of OP Tag for the pronoun in the chat area.",onLongPress:()=>R.displayToast(`By default, ${s.manifest.name} will use the OP tag to display pronouns. Toggling this option will always use Timestamps instead of OP tag for pronouns.`,"tooltip"),leading:e.React.createElement(c.Icon,{style:o.icon,source:f.Settings.Locale}),trailing:e.React.createElement(F,{value:s.storage.isTimestamp,onValueChange:()=>{s.storage.isTimestamp=!s.storage.isTimestamp,r(s.storage.isTimestamp)}})}),e.React.createElement(M,null),e.React.createElement(c,{label:"Roles",subLabel:"Show the pronoun styled as a role instead of plain text inside of profiles.",onLongPress:()=>R.displayToast(`With this option enabled, ${s.manifest.name} will style pronouns as roles in profiles. Otherwise, it will style them as plain text.`,"tooltip"),leading:e.React.createElement(c.Icon,{style:o.icon,source:f.Settings.Edit}),trailing:e.React.createElement(F,{value:s.storage.isRole,onValueChange:()=>{s.storage.isRole=!s.storage.isRole,n(s.storage.isRole)}})}))),e.React.createElement(P,{label:"Previews"},e.React.createElement(T,{style:{...o.container,maxWidth:350}},e.React.createElement(U,{style:o.image,source:`https://cdn.discordapp.com/attachments/${t?"1011346757214543875/1075007230337896448/pronoun-timestamp.png":"1011346757214543875/1075007230107193374/pronoun-tag.png"}`})),e.React.createElement(T,{style:{...o.container,marginTop:10,maxWidth:350}},e.React.createElement(U,{style:o.image,source:`https://cdn.discordapp.com/attachments/${a?"1011346757214543875/1075007778399199282/profile-role.png":"1011346757214543875/1075007778067841044/profile-plain.png"}`}))),e.React.createElement(P,{label:"Source"},e.React.createElement(T,{style:o.container},e.React.createElement(c,{label:"Source",subLabel:`Open the repository of ${s.manifest.name} externally.`,onLongPress:()=>R.displayToast(`Opens the repository of ${s.manifest.name} on GitHub in an external page to view any source code of the plugin.`,"tooltip"),leading:e.React.createElement(c.Icon,{style:o.icon,source:f.Open}),trailing:()=>e.React.createElement(c.Arrow,null),onPress:()=>{Y.openURL(w.plugin.source)}}),e.React.createElement(M,null),e.React.createElement(c,{label:"PronounDB",subLabel:`Open the ${s.manifest.name} website externally at \`https://pronoundb.org\`.`,onLongPress:()=>R.displayToast("Opens the PronounDB website in an external page which allows you to link your Discord account to PronounDB.","tooltip"),leading:e.React.createElement(c.Icon,{style:o.icon,source:f.Settings.External}),trailing:()=>e.React.createElement(c.Arrow,null),onPress:()=>{Y.openURL(w.plugin.pronoundb)}})))),e.React.createElement(ee,{style:o.subheaderText},`Build: (${s.manifest.hash.substring(0,8)})`))};const ae=u.findByProps("PRIMARY_INFO_TOP_OFFSET","SECONDARY_INFO_TOP_MARGIN","SIDE_PADDING");u.findByName("UserProfileName"),u.findByStoreName("UserStore");const{DCDChatManager:re}=e.ReactNative.NativeModules,V=e.stylesheet.createThemedStyleSheet({opTagBackgroundColor:{color:p.semanticColors.HEADER_PRIMARY},opTagTextColor:{color:p.semanticColors.BACKGROUND_PRIMARY}});let G,k;var se={onLoad:()=>{G=C.after("type",ae.default,(t,r)=>{const a=H.findInReactTree(r,d=>d?.type?.displayName==="View"&&d?.props?.children.findIndex(m=>m?.type?.name==="UserProfileBio")!==-1)?.props?.children;if(!a)return r;const{userId:n}=a?.find(d=>typeof d?.props?.displayProfile?.userId=="string")?.props?.displayProfile??{};if(!n)return r;const i="she/her";a.unshift(React.createElement(Pronoun,{pronoun:i}))}),k=C.before("updateRows",re,t=>{const r=JSON.parse(t[1]);for(const a of r){if(a.type!==1)continue;const n="she/her";if(s.storage.isTimestamp&&a.message.timestamp){a.message.timestamp+=" \u2022 "+n;continue}a.message.opTagText&&(a.message.tagText=a.message.tagText?a.message.tagText+" \u2022 ":""+a.message.opTagText),a.message.opTagText=n,a.message.opTagTextColor=e.ReactNative.processColor(V.opTagTextColor.color),a.message.opTagBackgroundColor=e.ReactNative.processColor(V.opTagBackgroundColor.color)}t[1]=JSON.stringify(r)})},onUnload:()=>{G?.(),k?.()},settings:te};return b.default=se,Object.defineProperty(b,"__esModule",{value:!0}),b})({},vendetta.metro,vendetta.metro.common,vendetta.patcher,vendetta.plugin,vendetta.utils,vendetta.ui.components,vendetta.storage,vendetta.ui.assets,vendetta.ui);
